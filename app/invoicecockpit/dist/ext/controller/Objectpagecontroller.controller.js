sap.ui.define(["sap/ui/core/mvc/ControllerExtension"],function(e){"use strict";return e.extend("invoicecockpit.ext.controller.Objectpagecontroller",{override:{onInit:function(){debugger;var e=this.base.getExtensionAPI().getModel()},onAfterRendering:async function(){debugger},editFlow:{onBeforeDiscard:async function(e){debugger;let t=e.context.sPath;let o="postattach";let i=e.context.getModel().bindContext(`/${o}(...)`);console.log();i.setParameter("p",t);await i.execute();const n=i.getBoundContext();var c=n.getValue()}},routing:{onAfterBinding:async function(e){debugger;if(e){let t=e.oModel.getServiceUrl();let o=t+e.sPath.substring(1)+"/content";$.ajax({url:o,type:"GET",success:function(e){debugger;if(!e){let e=new sap.m.Dialog({title:"Upload Invoice Pdf.",endButton:new sap.m.Button({text:"Confirm",type:"Emphasized",press:function(){debugger;e.getContent()[0].checkFileReadable().then(function(){e.getContent()[0].upload()},function(e){debugger;MessageToast.show("The file cannot be read. It may have changed.")});e.close()}})});e.addContent(new sap.ui.unified.FileUploader({fileType:["pdf"],httpRequestMethod:sap.ui.unified.FileUploaderHttpRequestMethod.Put,sendXHR:true,useMultipart:false,uploadUrl:o}));e.open()}}})}setTimeout(()=>{if(sap.ui.getCore().byId("invoicecockpit::invoiceCockpitObjectPage--fe::FooterBar::StandardAction::Cancel").getVisible()){sap.ui.getCore().byId("invoicecockpit::invoiceCockpitObjectPage--fe::CustomSubSection::Ttachments--uploadSet").setUploadEnabled(true);sap.ui.getCore().byId("invoicecockpit::invoiceCockpitObjectPage--fe::FooterBar::CustomAction::sendforapproval").setVisible(false)}else{sap.ui.getCore().byId("invoicecockpit::invoiceCockpitObjectPage--fe::CustomSubSection::Ttachments--uploadSet").setUploadEnabled(false);sap.ui.getCore().byId("invoicecockpit::invoiceCockpitObjectPage--fe::FooterBar::CustomAction::sendforapproval").setVisible(true)}},700)}}}})});