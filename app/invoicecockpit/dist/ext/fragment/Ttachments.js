sap.ui.define(["sap/m/MessageToast"],function(e){"use strict";var t;var a=this;var o;var r;return{onAfterItemAdded:function(e){var a=e.oSource.getModel().getServiceUrl();debugger;var r=e.getParameter("item");var i=window.location.href;const n=/uuid=([a-fA-F0-9-]+)/;const c=i.match(n);if(c){o=c[1];console.log(o)}else{console.log("Number not found in URL")}var s=async function(e){var r={mediaType:e.getMediaType(),fileName:e.getFileName(),size:e.getFileObject().size,fkey:o};debugger;var i={url:a+`invoiceCockpit(uuid=${o},IsActiveEntity=false)/invtofil`,method:"POST",headers:{"Content-type":"application/json"},data:JSON.stringify(r)};await new Promise((e,a)=>{debugger;$.ajax(i).done((a,o,r)=>{debugger;t=a.id;e(a)}).fail(e=>{a(e)})})};s(r).then(e=>{debugger;var o=a+`Files(id=${t},IsActiveEntity=false)/content`;t=null;r.setUploadUrl(o);r.setUrl(o);var i=this.byId("uploadSet");i.setHttpRequestMethod("PUT");i.uploadItem(r)}).catch(e=>{console.log(e)})},onOpenPressed:function(e){debugger;var t=e.oSource.getModel().getServiceUrl();let a=t+e.oSource.mProperties.url.substring(1);e.oSource.mProperties.url=a},onUploadCompleted:function(e){debugger;var t=this.byId("uploadSet");t.removeAllIncompleteItems()},afterItemRemoved:function(e){var t=e.oSource.getModel().getServiceUrl();debugger;const a=/^(.*?),IsActiveEntity=/;let o=e.mParameters.item.mProperties.url.match(a);let r=o[1]+",IsActiveEntity=false)";$.ajax({url:t+r,method:"DELETE"})},formatThumbnailUrl:function(e){debugger;var t;switch(e){case"image/png":t="sap-icon://card";break;case"text/plain":t="sap-icon://document-text";break;case"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":t="sap-icon://excel-attachment";break;case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":t="sap-icon://doc-attachment";break;case"application/pdf":t="sap-icon://pdf-attachment";break;default:t="sap-icon://attachment"}return t}}});